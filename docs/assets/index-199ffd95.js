(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=i(n);fetch(n.href,l)}})();var s=(e=>(e.COMMA="COMMA",e.DOT="DOT",e.OPEN_PARENTHESIS="OPEN_PARENTHESIS",e.CLOSED_PARENTHESIS="CLOSED_PARENTHESIS",e.OPEN_SQUARE_BRACKET="OPEN_SQUARE_BRACKET",e.CLOSED_SQUARE_BRACKET="CLOSED_SQUARE_BRACKET",e.NUMERIC_LITERAL="NUMERIC_LITERAL",e.STRING_LITERAL="STRING_LITERAL",e.IDENTIFIER="IDENTIFIER",e.RELATIONAL_OPERATOR="RELATIONAL_OPERATOR",e.EQUALITY_OPERATOR="EQUALITY_OPERATOR",e.AND="AND",e.OR="OR",e.NOT="NOT",e.TRUE="TRUE",e.FALSE="FALSE",e.NULL="NULL",e.IN="IN",e.NOT_IN="NOT_IN",e.CONTAINS="CONTAINS",e.HAS="HAS",e))(s||{});const $=[[/^\s+/,null],[/^,/,"COMMA"],[/^\./,"DOT"],[/^[=!]=/,"EQUALITY_OPERATOR"],[/^[<>]=?/,"RELATIONAL_OPERATOR"],[/^\b(and|AND)\b/,"AND"],[/^\b(or|OR)\b/,"OR"],[/^!/,"NOT"],[/^\b(contains|CONTAINS)\b/,"CONTAINS"],[/^\b(in|IN)\b/,"IN"],[/^\b(not in|NOT IN)\b/,"NOT_IN"],[/^\b(has|HAS)\b/,"HAS"],[/^\(/,"OPEN_PARENTHESIS"],[/^\)/,"CLOSED_PARENTHESIS"],[/^\[/,"OPEN_SQUARE_BRACKET"],[/^\]/,"CLOSED_SQUARE_BRACKET"],[/^\btrue\b/,"TRUE"],[/^\bfalse\b/,"FALSE"],[/^\bnull\b/,"NULL"],[/^\d+(\.\d+)?/,"NUMERIC_LITERAL"],[/^"[^"]*"/,"STRING_LITERAL"],[/^'[^']*'/,"STRING_LITERAL"],[/^\w+/,"IDENTIFIER"]];class b{constructor(){this._text="",this._cursor=0}init(t){this._text=t,this._cursor=0}getNextToken(){if(!this.hasMoreTokens())return null;const t=this._text.slice(this._cursor);for(const[i,r]of $){const n=i.exec(t);if(n!==null)return this._cursor+=n[0].length,r===null?this.getNextToken():{type:r,value:n[0]}}throw new SyntaxError(`Unexpected token: "${t[0]}"`)}hasMoreTokens(){return this._cursor<this._text.length}}class F{constructor(){this._lookahead=null,this._tokenizer=new b}parse(t){this._tokenizer.init(t),this._lookahead=this._tokenizer.getNextToken();const i=this.Program();if(this._lookahead)throw new SyntaxError(`Unexpected token: "${this._lookahead.value}"`);return i}Program(){return this.Expression()}Expression(){return this.LogicalORExpression()}LogicalORExpression(){return this._BinaryExpression(this.LogicalANDExpression.bind(this),s.OR,"LogicalExpression")}LogicalANDExpression(){return this._BinaryExpression(this.EqualityExpression.bind(this),s.AND,"LogicalExpression")}EqualityExpression(){return this._BinaryExpression(this.RelationalExpression.bind(this),s.EQUALITY_OPERATOR)}RelationalExpression(){return this._BinaryExpression(this.ScalarExpression.bind(this),s.RELATIONAL_OPERATOR)}ScalarExpression(){var i;let t=this.ArrayExpression();if(((i=this._lookahead)==null?void 0:i.type)===s.CONTAINS){const r=this._eat(this._lookahead.type),n=this.MemberExpression();t={type:"ScalarExpression",operator:r.value,left:this._checkScalar(t),right:this._checkScalar(n)}}return t}ArrayExpression(){var i,r,n;let t=this.MemberExpression();if(((i=this._lookahead)==null?void 0:i.type)===s.HAS){const l=this._eat(s.HAS),c=this.MemberExpression();t={type:"ArrayExpression",operator:l.value.toLowerCase(),left:this._checkArray(t),right:this._checkScalar(c)}}if(((r=this._lookahead)==null?void 0:r.type)===s.IN||((n=this._lookahead)==null?void 0:n.type)===s.NOT_IN){const l=this._eat(this._lookahead.type),c=this.MemberExpression();t={type:"ArrayExpression",operator:l.value.toLowerCase(),left:this._checkScalar(t),right:this._checkArray(c)}}return t}MemberExpression(){var i,r,n,l;let t=this.PrimaryExpression();for(;((i=this._lookahead)==null?void 0:i.type)===s.DOT||((r=this._lookahead)==null?void 0:r.type)===s.OPEN_SQUARE_BRACKET;){if(((n=this._lookahead)==null?void 0:n.type)===s.DOT){if(this._isLiteralNode(t))throw new SyntaxError("Invalid member expression: can't access member value of a scalar.");this._eat(s.DOT);const c=this.Identifier();t={type:"MemberExpression",computed:!1,object:t,property:c}}if(((l=this._lookahead)==null?void 0:l.type)===s.OPEN_SQUARE_BRACKET){this._eat(s.OPEN_SQUARE_BRACKET);const c=this.Expression();this._eat(s.CLOSED_SQUARE_BRACKET),t={type:"MemberExpression",computed:!0,object:t,property:c}}}return t}Identifier(){return{type:"Identifier",name:this._eat(s.IDENTIFIER).value}}PrimaryExpression(){var t,i,r;if(((t=this._lookahead)==null?void 0:t.type)===s.OPEN_SQUARE_BRACKET)return this.ArrayLiteralExpression();if(this._isLiteral((i=this._lookahead)==null?void 0:i.type))return this.Literal();switch((r=this._lookahead)==null?void 0:r.type){case s.OPEN_PARENTHESIS:return this.ParenthesizedExpression();case s.IDENTIFIER:return this.Identifier();default:throw new SyntaxError("Unexpected token.")}}ParenthesizedExpression(){this._eat(s.OPEN_PARENTHESIS);const t=this.Expression();return this._eat(s.CLOSED_PARENTHESIS),{...t,extra:{parenthesized:!0}}}Literal(){var t,i;switch((t=this._lookahead)==null?void 0:t.type){case s.NUMERIC_LITERAL:return this.NumericLiteral();case s.STRING_LITERAL:return this.StringLiteral();case s.TRUE:return this.BooleanLiteral(!0);case s.FALSE:return this.BooleanLiteral(!1);case s.NULL:return this.NullLiteral();default:throw new Error(`Unexpected literal: ${(i=this._lookahead)==null?void 0:i.type}`)}}BooleanLiteral(t){return this._eat(t?s.TRUE:s.FALSE),{type:"BooleanLiteral",value:t}}NullLiteral(){return this._eat(s.NULL),{type:"NullLiteral",value:null}}NumericLiteral(){const t=this._eat(s.NUMERIC_LITERAL);return{type:"NumericLiteral",value:Number(t.value)}}StringLiteral(){return{type:"StringLiteral",value:this._eat(s.STRING_LITERAL).value.slice(1,-1)}}ArrayLiteralExpression(){var i;this._eat(s.OPEN_SQUARE_BRACKET);const t=((i=this._lookahead)==null?void 0:i.type)===s.CLOSED_SQUARE_BRACKET?[]:this.ArrayLiteralElementList();return this._eat(s.CLOSED_SQUARE_BRACKET),{type:"ArrayLiteralExpression",elements:t}}ArrayLiteralElementList(){var i,r;const t=[];do t.push(this._isLiteral((i=this._lookahead)==null?void 0:i.type)?this.Literal():this.MemberExpression());while(((r=this._lookahead)==null?void 0:r.type)===s.COMMA&&this._eat(s.COMMA));return t}_isLiteral(t){return t===s.STRING_LITERAL||t===s.NUMERIC_LITERAL||t===s.TRUE||t===s.FALSE||t===s.NULL}_checkValidAssignmentTarget(t){if(t.type==="Identifier"||t.type==="MemberExpression")return t;throw new SyntaxError("Invalid left-hand side in assignment expression")}_checkScalar(t){if(t.type!=="ArrayLiteralExpression")return t;throw new SyntaxError(`Invalid scalar: ${t.type}`)}_checkArray(t){if(t.type==="ArrayLiteralExpression"||t.type==="Identifier")return t;throw new SyntaxError(`Invalid array expression: ${t.type}`)}_isLiteralNode(t){return["NumericLiteral","StringLiteral","BooleanLiteral","NullLiteral"].includes(t.type)}_BinaryExpression(t,i,r="BinaryExpression"){var l;let n=t();for(;((l=this._lookahead)==null?void 0:l.type)===i;){const c=this._eat(i),f=t();n={type:r,operator:c.value.toLowerCase(),left:n,right:f}}return n}_eat(t){const i=this._lookahead;if(i===null)throw new SyntaxError(`Unexpected end of input, expected: "${t}"`);if(i.type!==t)throw new SyntaxError(`Unexpected token: "${i.value}"`);return this._lookahead=this._tokenizer.getNextToken(),i}}class a{constructor(t,i,r=null){this.x=0,this.y=0,this.width=0,this.height=0,this.mod=0,this.parent=null,this.children=[],this.className=i,this.value=t.toString(),r&&(this.children=r),this.x=0,this.y=0,this.mod=0,this.width=120,this.height=28,r&&r.forEach(n=>n.parent=this)}isLeaf(){return this.children.length===0}isLeftMost(){return this.parent===null?!0:this.parent.children[0]===this}isRightMost(){return this.parent===null?!0:this.parent.children[this.parent.children.length-1]===this}getPreviousSibling(){return this.parent==null||this.isLeftMost()?null:this.parent.children[this.parent.children.indexOf(this)-1]}getNextSibling(){return this.parent==null||this.isRightMost()?null:this.parent.children[this.parent.children.indexOf(this)+1]}getLeftMostSibling(){return this.parent==null?null:this.isLeftMost()?this:this.parent.children[0]}getLeftMostChild(){return this.children.length==0?null:this.children[0]}getRightMostChild(){return this.children.length==0?null:this.children[this.children.length-1]}}class H{constructor(){this.siblingDistance=20,this.treeDistance=this.siblingDistance+10,this.maxX=0,this.maxY=0}autoLayout(t){return this.maxX=0,this.maxY=0,this.initializeNodes(t,0),this.calculateInitialX(t),this.checkAllChildrenOnScreen(t),this.calculateFinalPositions(t,0),[this.maxX,this.maxY]}initializeNodes(t,i){var r;t.x=-1,t.y=i,t.mod=0,(r=t.children)==null||r.forEach(n=>{this.initializeNodes(n,i+1)})}calculateInitialX(t){var i;if((i=t.children)==null||i.forEach(r=>this.calculateInitialX(r)),t.isLeaf())t.isLeftMost()?t.x=0:t.x=t.getPreviousSibling().x+t.getPreviousSibling().width+this.siblingDistance;else if(t.children.length===1)t.isLeftMost()?t.x=t.children[0].x:(t.x=t.getPreviousSibling().x+t.getPreviousSibling().width+this.siblingDistance,t.mod=t.x-t.children[0].x);else{const r=t.getLeftMostChild(),n=t.getRightMostChild(),l=(n.x+n.width/2-(r.x+r.width/2))/2;t.isLeftMost()?t.x=r.x+l:(t.x=t.getPreviousSibling().x+t.getPreviousSibling().width+this.siblingDistance,t.mod=t.x-l)}t.children.length&&!t.isLeftMost()&&this.checkForConflicts(t)}checkAllChildrenOnScreen(t){const i=new Map;this.getLeftContour(t,0,i);let r=0;for(let n of i.keys())i.get(n)+r<0&&(r=i.get(n)*-1);r>0&&(t.x+=r,t.mod+=r)}calculateFinalPositions(t,i){t.x+=i,t.y=t.y*100,i+=t.mod,this.maxX<t.x+t.width&&(this.maxX=t.x+t.width),this.maxY<t.y+t.height&&(this.maxY=t.y+t.height),t.children.forEach(r=>{this.calculateFinalPositions(r,i)})}checkForConflicts(t){const i=this.treeDistance+t.width;let r=0;const n=new Map;this.getLeftContour(t,0,n);let l=t.getLeftMostSibling();for(;l!==null&&l!==t;){const x=new Map;this.getRightContour(l,0,x);const L=Math.max.apply(Math,Array.from(n.keys())),d=Math.max.apply(Math,Array.from(x.keys())),y=Math.min(L,d);for(let _=t.y+1;_<=y;_++){const A=n.get(_)-x.get(_);A+r<i&&(r=Math.max(i-A,r))}r>0&&this.centerNodesBetween(t,l),l=l.getNextSibling()}r>0&&(t.x+=r,t.mod+=r,r=0);const c=t.getLeftMostChild(),f=t.getRightMostChild();if(c&&f&&c!==f){const x=t.mod+(c.x+(f.x-c.x)/2);t.x=x}}centerNodesBetween(t,i){const r=t.parent.children.indexOf(t),n=t.parent.children.indexOf(i),l=n-r-1;if(l>0){const c=(t.x-i.x)/(l+1);let f=1;for(let x=r+1;x<n;x++){const L=t.parent.children[x],y=i.x+c*f-L.x;L.x+=y,L.mod+=y,f++}this.checkForConflicts(t)}}getLeftContour(t,i,r){r.has(t.y)?r.set(t.y,Math.min(r.get(t.y),t.x+i)):r.set(t.y,t.x+i),i+=t.mod,t.children.forEach(n=>this.getLeftContour(n,i,r))}getRightContour(t,i,r){r.has(t.y)?r.set(t.y,Math.max(r.get(t.y),t.x+i)):r.set(t.y,t.x+i),i+=t.mod,t.children.forEach(n=>this.getRightContour(n,i,r))}}function o(e){switch(e.type){case"StatementList":return new a("Statements","statement-list",e.statements.map(o));case"ExpressionStatement":return new a("Expression","expression-statement",[o(e.expression)]);case"BlockStatement":return new a("Block","block-statement",Array.isArray(e.body)?e.body.map(o):e.body?[o(e.body)]:[]);case"EmptyStatement":return new a("Empty","empty-statement");case"BinaryExpression":return new a(e.operator,"binary-expression",[o(e.left),o(e.right)]);case"LogicalExpression":return new a(e.operator,"logical-expression",[o(e.left),o(e.right)]);case"MemberExpression":return new a("member","member-expression",[o(e.object),o(e.property)]);case"Identifier":return new a(e.name,"identifier");case"ArrayLiteralExpression":return new a("array","array-literal",e.elements.map(o));case"NumericLiteral":return new a(e.value,"numeric-literal");case"StringLiteral":return new a(`"${e.value}"`,"string-literal");case"AssignmentExpression":return new a("=","assignment-expression",[o(e.left),o(e.right)]);case"VariableStatement":return new a("var","variable-statement",[o(e.declaration)]);case"VariableDeclaration":return new a("set","variable-statement",[o(e.id)].concat(e.init?o(e.init):[]));case"IfStatement":return new a("if","if-statement",[new a("[cond]","if-condition-statement helper",[o(e.test)]),new a("[then]","if-then-statement helper",[o(e.consequent)]),new a("[else]","if-else-statement helper",e.alternate&&[o(e.alternate)])]);case"BooleanLiteral":return new a(e.value,"boolean-literal keyword");case"NullLiteral":return new a("null","null-literal keyword");case"UnaryExpression":return new a(e.operator==="!"?"not":e.operator,"unary-expression",[o(e.argument)]);case"WhileStatement":return new a("while","while-statement keyword",[new a("cond","while-condition",[o(e.test)]),new a("body","while-condition-body",[o(e.body)])]);case"DoWhileStatement":return new a("do while","do-while-statement keyword",[new a("cond","do-while-condition",[o(e.test)]),new a("body","do-while-condition-body",[o(e.body)])]);case"ForStatement":return new a("for","for-statement keyword",[new a("[init]","for-init helper",e.init&&[o(e.init)]),new a("[test]","for-test helper",e.test&&[o(e.test)]),new a("[update]","for-update helper",e.update&&[o(e.update)]),new a("[body]","for-body helper",[o(e.body)])]);case"FunctionDeclaration":return new a(`call ${e.name.name}`,"function-declaration",[new a("params","function-parameters helper",e.params.map(o)),new a("body","function-body helper",[o(e.body)])]);case"ReturnStatement":return new a("return","return-statement",[o(e.argument)]);case"CallExpression":return new a("call","call-expression",[o(e.callee),new a("args","call-expression-args helper",e.args.map(o))]);case"ScalarExpression":return new a(e.operator,"scalar-expression",[o(e.left),o(e.right)]);case"ArrayExpression":return new a(e.operator,"array-expression",[o(e.left),o(e.right)]);case"Error":return new a(e.value,"error");default:throw new Error(`Unexpected node type: ${e.type}`)}}function T(e){let t=`<div class="ast-node bg-${e.className}" style="left: ${e.x}px; top: ${e.y}px; width: ${e.width}px">${e.value}</div>`;return e.children&&e.children.forEach(i=>{t+=T(i)}),t}function Q(e,t){return e.x<t.x?{x:(t.x-e.x)/2,y:(t.y-e.y+20)/2}:{x:(e.x-t.x)/2,y:(t.y-e.y+20)/2}}function N(e,t){e.children&&e.children.forEach(i=>{var r=document.createElementNS("http://www.w3.org/2000/svg","path");const n=Q(e,i),l=[[e.x+e.width/2,e.y],[e.x+e.width/2,e.y+n.y],[i.x+i.width/2,e.y+n.y],[i.x+i.width/2,i.y]];r.setAttribute("d",`M${l.map(c=>c.join(",")).join(" L")}`),t.appendChild(r),N(i,t)})}const m=[];let g=-1;function K(){const e=document.getElementById("terminal-history"),t=document.getElementById("terminal-input"),i=document.getElementById("ast-container"),r=document.getElementById("ast-connections"),n=document.getElementById("ast-nodes"),l=document.getElementById("tokens"),c=document.getElementById("ast-json"),f=document.getElementById("terminal"),x=new b,L=new F,d=new H;function y(){t.focus();const h=document.createRange(),u=window.getSelection(),{childNodes:E}=t,p=E&&E.length-1;h.selectNodeContents(p===-1?t:E[p]),h.collapse(!1),u==null||u.removeAllRanges(),u==null||u.addRange(h),t.scrollIntoView()}function _(){var h;for(e.innerText="",c.textContent="",l.textContent="";r.childNodes.length;)(h=r.childNodes[0].parentNode)==null||h.removeChild(r.childNodes[0]);n.textContent="",r.style.width="0px",r.style.height="0px",i.removeAttribute("style")}function A(h){x.init(h);const u=[],E=[];for(;x.hasMoreTokens();){const p=x.getNextToken();p&&(u.push(p),E.push(`<div class="token bg-${p.type.toLowerCase().replace(/_/g,"-")}" title="${p.type}">${p.value}<small>${p.type}</small></div>`))}return l.innerHTML=E.join(""),u}function M(h){var C;const u=L.parse(h),E=JSON.stringify(u,null,2);for(c.innerHTML=E.replace(/("type": "([^"]+)"),\n(\s*)("(name|value|operator)": (("[^"]+")|(\d+(\.\d+)?)|true|false|null))/g,(z,X,O,k,Y,v,P,U,D)=>{let R=O.replace(/[A-Z]/g,B=>`-${B.toLowerCase()}`);return R[0]!=="-"&&(R="-"+R),`"type": <strong>"${O}"</strong>,
${k}"${v}": <span class="json bg${R}">${P||U||D}</span>`});r.childNodes.length;)(C=r.childNodes[0].parentNode)==null||C.removeChild(r.childNodes[0]);n.textContent="",r.style.width="0px",r.style.height="0px",i.removeAttribute("style");const p=o(u),[w,S]=d.autoLayout(p);return r.style.width=`${w}px`,r.style.height=`${S}px`,n.innerHTML=T(p),N(p,r),E}function I(h){const u=document.createElement("div");if(u.textContent=`> ${h}`,e.appendChild(u),h.length){m[m.length-1]!==h&&m.push(h),g=m.length;const E=document.createElement("pre");try{const p=JSON.stringify(A(h),null,2),w=M(h)}catch(p){throw E.innerHTML=`<span class="error">${p.toString()}</span>`,p}finally{e.appendChild(E)}}}document.addEventListener("selectionchange",()=>{var p,w,S;if(((p=document.activeElement)==null?void 0:p.id)!=="input")return;const h=(w=window.getSelection())==null?void 0:w.getRangeAt(0),u=h==null?void 0:h.endOffset,E=((S=t==null?void 0:t.textContent)==null?void 0:S.length)??0;u&&u<E?t.classList.add("no-caret"):t.classList.remove("no-caret")}),t.addEventListener("input",()=>{if(t.childElementCount>0){const h=t.innerText.replace(/\n$/,"").split(`
`),u=h[h.length-1];for(let E=0;E<=h.length-2;++E)I(h[E]);t.textContent=u,y()}t.innerText.length===0&&t.classList.remove("no-caret")}),document.addEventListener("keydown",h=>{h.key==="k"&&h.metaKey&&_()}),t.addEventListener("keydown",h=>{h.key==="Enter"&&(h.preventDefault(),I((t==null?void 0:t.textContent)||""),t.textContent="",y()),h.key==="ArrowUp"&&g>0&&(h.preventDefault(),g--,t.textContent=m[g],y()),h.key==="ArrowDown"&&(g<m.length-1?(h.preventDefault(),g++,t.textContent=m[g],y()):(g=m.length,t.textContent="",y()))}),f==null||f.addEventListener("click",()=>{y()}),t.focus()}K();
